import{r as n,j as e}from"./react-DPbnXjGw.js";import t from"./Icon-BSY9YNvu.js";import{H as A,x as z}from"./highlight.js-vNZFY2Ar.js";import{R as D,g as I}from"./@uiw-Dpi-klDg.js";import{G as T}from"./@codemirror-BrsHXVAL.js";import"./index-D1nS-IVF.js";import"./@babel-Cv5OCJ0e.js";import"./@lezer-kGRDH3v9.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./react-dom-D6bd396G.js";import"./scheduler-SPyfQU6S.js";import"./@google-BABIsQe9.js";import"./zod-Afug2wbS.js";A.registerLanguage("html",z);const se=({code:a,isLoading:o,className:F,isFullscreen:$,onToggleFullscreen:f,editable:g=!1,onCodeChange:y,onRestore:m,canRestore:v})=>{const[d,u]=n.useState(!1),[j,N]=n.useState(null),[M,C]=n.useState(0),[l,i]=n.useState(!1),[p,b]=n.useState(""),[c,w]=n.useState(14);n.useEffect(()=>{if(o){const r=setInterval(()=>{C(s=>(s+1)%4)},500);return()=>clearInterval(r)}else C(0)},[o]),n.useEffect(()=>{N(!o&&a?A.highlight(a,{language:"html"}).value:null)},[a,o]);const k=async()=>{if(!(!a||o))try{await navigator.clipboard.writeText(a),u(!0),setTimeout(()=>u(!1),2e3)}catch(r){console.error("Failed to copy text: ",r);try{const s=document.createElement("textarea");s.value=a,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.focus(),s.select(),document.execCommand("copy"),document.body.removeChild(s),u(!0),setTimeout(()=>u(!1),2e3)}catch(s){console.error("Fallback copy method failed: ",s),alert("Failed to copy code. Please copy manually.")}}},S=()=>{if(!a||o)return;const r=new Blob([a],{type:"text/html"}),s=URL.createObjectURL(r),x=document.createElement("a");x.href=s,x.download="generated.html",document.body.appendChild(x),x.click(),setTimeout(()=>{document.body.removeChild(x),URL.revokeObjectURL(s)},0)},h=o?`// Generating code${[".","..","...","."][M]}
<div class="flex items-center justify-center h-full">
  <span class="animate-spin"><i class="fas fa-spinner text-2xl text-indigo-300"></i></span>
</div>`:a&&a.trim()!==""?a:null,U="flex flex-col h-full",_="code-block-container flex-grow overflow-hidden",E=()=>{l?(i(!1),y&&y(p)):(i(!0),b(a||""))},H=()=>w(r=>Math.min(r+2,32)),R=()=>w(r=>Math.max(r-2,10));return $?e.jsxs("div",{className:"fixed inset-0 z-[100] bg-slate-900 flex flex-col p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b border-slate-700",children:[e.jsx("h3",{className:"font-semibold text-base text-slate-200",children:"Generated Code"}),e.jsxs("div",{children:[e.jsx("button",{onClick:R,className:"p-1.5 mr-1 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white text-xs group","aria-label":"Réduire la taille du texte",title:"Réduire la taille du texte",children:e.jsx(t,{name:"fas fa-minus",className:"text-base group-hover:text-primary cursor-pointer transition-colors"})}),e.jsx("button",{onClick:H,className:"p-1.5 mr-2 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white text-xs group","aria-label":"Augmenter la taille du texte",title:"Augmenter la taille du texte",children:e.jsx(t,{name:"fas fa-plus",className:"text-base group-hover:text-primary cursor-pointer transition-colors"})}),g&&!l&&e.jsx("button",{onClick:()=>{i(!0),b(a||"")},className:"p-1.5 mr-2 bg-transparent text-slate-300 hover:bg-yellow-100 hover:text-yellow-700 transition text-xs","aria-label":"Edit code",title:"Edit",children:e.jsx(t,{name:"fas fa-pen",className:"text-base cursor-pointer transition-colors group-hover:text-primary"})}),l&&e.jsx("button",{onClick:E,className:"p-1.5 mr-2 hover:bg-green-200 transition text-slate-300 text-xs","aria-label":"Save code",title:"Save",children:e.jsx(t,{name:"fas fa-check",className:"text-base cursor-pointer transition-colors group-hover:text-green-600"})}),l&&e.jsx("button",{onClick:()=>i(!1),className:"p-1.5 mr-2 bg-transparent text-gray-600 hover:bg-red-200 hover:text-red-600 transition text-xs","aria-label":"Cancel editing",title:"Cancel",children:e.jsx(t,{name:"fas fa-times",className:"text-base group-hover:text-red-500 cursor-pointer transition-colors"})}),e.jsx("button",{onClick:k,disabled:!a||o,className:"p-1.5 mr-2 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Copy code",children:e.jsx(t,{name:d?"fas fa-check":"fas fa-copy",className:`${d?"text-green-400":""} text-sm`})}),e.jsx("button",{onClick:S,disabled:!a||o,className:"p-1.5 mr-2 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Download code",children:e.jsx(t,{name:"fas fa-download",className:"text-sm"})}),v&&m&&e.jsx("button",{onClick:m,className:"p-1.5 mr-2 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Restaurer le code généré",title:"Restaurer le code généré par l'IA",children:e.jsx(t,{name:"fas fa-undo",className:"text-sm"})}),e.jsx("button",{onClick:f,className:"p-1.5 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white text-xs","aria-label":"Exit fullscreen",children:e.jsx(t,{name:"fas fa-compress",className:"text-sm"})})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-0 custom-scrollbar scrollbar-blue-theme",style:{background:"#0f172a",color:"#e0e7ff"},children:l?e.jsx(D,{value:p,height:"100%",theme:I,extensions:[T()],onChange:r=>b(r),basicSetup:{lineNumbers:!0,autocompletion:!0},className:"flex-1 w-full font-mono border border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary mb-2 custom-scrollbar scrollbar-blue-theme codemirror-scrollbar-thin",style:{minHeight:0,height:"100%",fontSize:c,lineHeight:"1.3"},autoFocus:!0}):h?e.jsx("pre",{className:"h-full overflow-auto p-3 text-xs flex-1 custom-scrollbar scrollbar-blue-theme",style:{background:"#0f172a",color:"#e0e7ff",fontSize:c,lineHeight:"1.3"},children:e.jsx("code",{className:"language-html text-slate-200",dangerouslySetInnerHTML:{__html:j||h}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full text-slate-400 opacity-80 select-none",children:[e.jsx(t,{name:"fas fa-palette",className:"text-5xl mb-2"}),e.jsx("span",{className:"text-lg",children:"No code generated yet."})]})})]}):e.jsxs("div",{className:`${F||""} ${U}`,style:{minHeight:0},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2 p-2",children:[e.jsx("h3",{className:"font-semibold text-base text-gray-800",children:"Code (HTML & Tailwind)"}),e.jsxs("div",{children:[e.jsx("button",{onClick:R,className:"p-1.5 mr-1 bg-transparent hover:bg-gray-200 transition text-gray-500 text-xs group","aria-label":"Réduire la taille du texte",title:"Réduire la taille du texte",children:e.jsx(t,{name:"fas fa-minus",className:"text-base group-hover:text-primary cursor-pointer transition-colors"})}),e.jsx("button",{onClick:H,className:"p-1.5 mr-2 bg-transparent hover:bg-gray-200 transition text-gray-500 text-xs group","aria-label":"Augmenter la taille du texte",title:"Augmenter la taille du texte",children:e.jsx(t,{name:"fas fa-plus",className:"text-base group-hover:text-primary cursor-pointer transition-colors"})}),g&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:E,className:`p-1.5 mr-2 bg-transparent ${l?"hover:bg-green-200":""} text-gray-600 transition text-xs group`,"aria-label":l?"Save code":"Edit code",title:l?"Save":"Edit",children:e.jsx(t,{name:l?"fas fa-check":"fas fa-pen",className:`text-base cursor-pointer transition-colors ${l?"text-green-700 group-hover:text-green-800":"group-hover:text-primary"}`})}),l&&e.jsx("button",{onClick:()=>i(!1),className:"p-1.5 mr-2 bg-transparent hover:bg-red-200 text-gray-600 hover:text-red-600 transition text-xs group","aria-label":"Cancel editing",title:"Cancel",children:e.jsx(t,{name:"fas fa-times",className:"text-base group-hover:text-red-500 cursor-pointer transition-colors"})})]}),e.jsx("button",{onClick:k,disabled:!a||o,className:"p-1.5 mr-2 bg-transparent  transition text-gray-500 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Copy code",children:e.jsx(t,{name:d?"fas fa-check":"fas fa-copy",className:`${d?"text-green-500":""} text-sm`})}),e.jsx("button",{onClick:S,disabled:!a||o,className:"p-1.5 mr-2 bg-transparent  transition text-gray-500 hover:text-primary disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Download code",children:e.jsx(t,{name:"fas fa-download",className:"text-sm"})}),v&&m&&e.jsx("button",{onClick:m,className:"p-1.5 mr-2 bg-transparent hover:bg-slate-600 transition text-slate-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed text-xs","aria-label":"Restaurer le code généré",title:"Restaurer le code généré par l'IA",children:e.jsx(t,{name:"fas fa-undo",className:"text-sm"})}),e.jsx("button",{onClick:f,className:"p-1.5 bg-transparent  transition text-gray-500 hover:text-primary text-xs","aria-label":"Enter fullscreen",children:e.jsx(t,{name:"fas fa-expand",className:"text-sm"})})]})]}),e.jsx("div",{className:`${_} bg-slate-900 flex-1 flex flex-col min-h-0 custom-scrollbar scrollbar-blue-theme`,style:{color:"#e0e7ff",background:"#0f172a"},children:l?e.jsx(D,{value:p,height:"100%",theme:I,extensions:[T()],onChange:r=>b(r),basicSetup:{lineNumbers:!0,autocompletion:!0},className:"flex-1 w-full font-mono border border-slate-700 focus:outline-none focus:ring-2 focus:ring-primary mb-2 custom-scrollbar scrollbar-blue-theme codemirror-scrollbar-thin",style:{minHeight:0,height:"100%",fontSize:c,lineHeight:"1.5",background:"#0f172a"},autoFocus:!0}):h?e.jsx("pre",{className:"h-full overflow-auto p-3 flex-1 custom-scrollbar scrollbar-blue-theme",style:{background:"#0f172a",color:"#e0e7ff",scrollbarColor:"#6366f1 #0f172a",fontSize:c,lineHeight:"1.5"},children:e.jsx("code",{className:"language-html text-slate-200",style:{background:"transparent",color:"#e0e7ff",fontSize:c,lineHeight:"1.5"},dangerouslySetInnerHTML:{__html:j||h}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full text-slate-400 opacity-80 select-none",children:[e.jsx(t,{name:"fas fa-palette",className:"text-4xl mb-2"}),e.jsx("span",{className:"text-base",children:"No code generated yet."})]})})]})};export{se as default};
